<?xml version="1.0" encoding="UTF-8"?>
<pmd-cpd>
   <duplication lines="97" tokens="546">
      <file begintoken="392545" column="9" endcolumn="26" endline="114" endtoken="393090"
            line="18"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\org\mage\plugins\card\dl\sources\MagidexImageSource.java"/>
      <file begintoken="417080" column="9" endcolumn="26" endline="153" endtoken="417625"
            line="57"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\org\mage\plugins\card\dl\sources\WizardCardsImageSource.java"/>
      <codefragment><![CDATA[        supportedSets = new LinkedHashSet<>();
        // supportedSets.add("JR"); // TODO: Set was split into the individual sets as listed on Scryfall
        supportedSets.add("LEA");
        supportedSets.add("LEB");
        supportedSets.add("2ED");
        supportedSets.add("ARN");
        supportedSets.add("ATQ");
        supportedSets.add("3ED");
        supportedSets.add("LEG");
        supportedSets.add("DRK");
        supportedSets.add("FEM");
        supportedSets.add("4ED");
        supportedSets.add("ICE");
        supportedSets.add("CHR");
        supportedSets.add("HML");
        supportedSets.add("ALL");
        supportedSets.add("MIR");
        supportedSets.add("VIS");
        supportedSets.add("5ED");
        supportedSets.add("POR");
        supportedSets.add("WTH");
        supportedSets.add("TMP");
        supportedSets.add("STH");
        supportedSets.add("EXO");
        supportedSets.add("P02");
        supportedSets.add("UGL");
        supportedSets.add("USG");
        supportedSets.add("DD3DVD");
        supportedSets.add("DD3EVG");
        supportedSets.add("DD3GVL");
        supportedSets.add("DD3JVC");

        supportedSets.add("ULG");
        supportedSets.add("6ED");
        supportedSets.add("UDS");
        supportedSets.add("PTK");
        supportedSets.add("S99");
        supportedSets.add("MMQ");
        // supportedSets.add("BRB");Battle Royale Box Set
        supportedSets.add("NEM");
        supportedSets.add("S00");
        supportedSets.add("PCY");
        supportedSets.add("INV");
        // supportedSets.add("BTD"); // Beatdown Boxset
        supportedSets.add("PLS");
        supportedSets.add("7ED");
        supportedSets.add("APC");
        supportedSets.add("ODY");
        // supportedSets.add("DKM"); // Deckmasters 2001
        supportedSets.add("TOR");
        supportedSets.add("JUD");
        supportedSets.add("ONS");
        supportedSets.add("LGN");
        supportedSets.add("SCG");
        supportedSets.add("8ED");
        supportedSets.add("MRD");
        supportedSets.add("DST");
        supportedSets.add("5DN");
        supportedSets.add("CHK");
        supportedSets.add("UNH");
        supportedSets.add("BOK");
        supportedSets.add("SOK");
        supportedSets.add("9ED");
        supportedSets.add("RAV");
        supportedSets.add("GPT");
        supportedSets.add("DIS");
        supportedSets.add("CSP");
        supportedSets.add("TSP");
        supportedSets.add("TSB");
        supportedSets.add("PLC");
        supportedSets.add("FUT");
        supportedSets.add("10E");
        supportedSets.add("MED");
        supportedSets.add("LRW");
        supportedSets.add("EVG");
        supportedSets.add("MOR");
        supportedSets.add("SHM");
        supportedSets.add("EVE");
        supportedSets.add("DRB");
        supportedSets.add("ME2");
        supportedSets.add("ALA");
        supportedSets.add("DD2");
        supportedSets.add("CON");
        supportedSets.add("DDC");
        supportedSets.add("ARB");
        supportedSets.add("M10");
        // supportedSets.add("TD0"); // Magic Online Deck Series
        supportedSets.add("V09");
        supportedSets.add("HOP");
        supportedSets.add("ME3");
        supportedSets.add("ZEN");
        supportedSets.add("DDD");
        supportedSets.add("H09");
        supportedSets.add("WWK");
        supportedSets.add("DDE");
        supportedSets.add("ROE");
        supportedSets.add("DPA");]]></codefragment>
   </duplication>
   <duplication lines="73" tokens="395">
      <file begintoken="393092" column="32" endcolumn="26" endline="186" endtoken="393486"
            line="114"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\org\mage\plugins\card\dl\sources\MagidexImageSource.java"/>
      <file begintoken="417621" column="32" endcolumn="26" endline="223" endtoken="418015"
            line="151"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\org\mage\plugins\card\dl\sources\WizardCardsImageSource.java"/>
      <codefragment><![CDATA[        supportedSets.add("DPA");
        supportedSets.add("ARC");
        supportedSets.add("M11");
        supportedSets.add("V10");
        supportedSets.add("DDF");
        supportedSets.add("SOM");
        // supportedSets.add("TD0"); // Commander Theme Decks
        supportedSets.add("PD2");
        supportedSets.add("ME4");
        supportedSets.add("MBS");
        supportedSets.add("DDG");
        supportedSets.add("NPH");
        supportedSets.add("CMD");
        supportedSets.add("M12");
        supportedSets.add("V11");
        supportedSets.add("DDH");
        supportedSets.add("ISD");
        supportedSets.add("PD3");
        supportedSets.add("DKA");
        supportedSets.add("DDI");
        supportedSets.add("AVR");
        supportedSets.add("PC2");
        supportedSets.add("M13");
        supportedSets.add("V12");
        supportedSets.add("DDJ");
        supportedSets.add("RTR");
        supportedSets.add("CM1");
        // supportedSets.add("TD2"); // Duel Decks: Mirrodin Pure vs. New Phyrexia
        supportedSets.add("GTC");
        supportedSets.add("DDK");
        supportedSets.add("DGM");
        supportedSets.add("MMA");
        supportedSets.add("M14");
        supportedSets.add("V13");
        supportedSets.add("DDL");
        supportedSets.add("THS");
        supportedSets.add("C13");
        supportedSets.add("BNG");
        supportedSets.add("DDM");
        supportedSets.add("JOU");
        // supportedSets.add("MD1"); // Modern Event Deck
        supportedSets.add("CNS");
        supportedSets.add("VMA");
        supportedSets.add("M15");
        supportedSets.add("V14");
        supportedSets.add("DDN");
        supportedSets.add("KTK");
        supportedSets.add("C14");
        // supportedSets.add("DD3"); // Duel Decks Anthology
        supportedSets.add("FRF");
        supportedSets.add("DDO");
        supportedSets.add("DTK");
        supportedSets.add("TPR");
        supportedSets.add("MM2");
        supportedSets.add("ORI");
        supportedSets.add("V15");
        supportedSets.add("DDP");
        supportedSets.add("BFZ");
        supportedSets.add("EXP");
        supportedSets.add("C15");
        // supportedSets.add("PZ1"); // Legendary Cube
        supportedSets.add("OGW");
        supportedSets.add("DDQ");
        supportedSets.add("W16");
        supportedSets.add("SOI");
        supportedSets.add("EMA");
        supportedSets.add("EMN");
        supportedSets.add("V16");
        supportedSets.add("CN2");
        supportedSets.add("DDR");
        supportedSets.add("KLD");
        // supportedSets.add("PZ2"); // Treasure Chests
        supportedSets.add("C16");]]></codefragment>
   </duplication>
   <duplication lines="54" tokens="346">
      <file begintoken="147908" column="121" endcolumn="10" endline="481" endtoken="148253"
            line="428"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\dialog\PickCheckBoxDialog.java"/>
      <file begintoken="151428" column="46" endcolumn="10" endline="515" endtoken="151773"
            line="468"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\dialog\PickChoiceDialog.java"/>
      <codefragment><![CDATA[                                .addComponent(labelSubMessage, javax.swing.GroupLayout.DEFAULT_SIZE, 30, Short.MAX_VALUE))
        );

        labelSearch.setText("Search:");

        editSearch.setText("sample search text");

        javax.swing.GroupLayout panelSearchLayout = new javax.swing.GroupLayout(panelSearch);
        panelSearch.setLayout(panelSearchLayout);
        panelSearchLayout.setHorizontalGroup(
                panelSearchLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(panelSearchLayout.createSequentialGroup()
                                .addGap(0, 0, 0)
                                .addComponent(labelSearch)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(editSearch)
                                .addGap(0, 0, 0))
        );
        panelSearchLayout.setVerticalGroup(
                panelSearchLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(panelSearchLayout.createSequentialGroup()
                                .addGap(3, 3, 3)
                                .addGroup(panelSearchLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                        .addComponent(labelSearch)
                                        .addComponent(editSearch, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addGap(3, 3, 3))
        );

        listChoices.setModel(new javax.swing.AbstractListModel() {
            String[] strings = {"item1", "item2", "item3"};

            public int getSize() {
                return strings.length;
            }

            public Object getElementAt(int i) {
                return strings[i];
            }
        });
        scrollList.setViewportView(listChoices);

        btOK.setText("Choose");
        btOK.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btOKActionPerformed(evt);
            }
        });

        btCancel.setText("Cancel");
        btCancel.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btCancelActionPerformed(evt);
            }
        });]]></codefragment>
   </duplication>
   <duplication lines="57" tokens="339">
      <file begintoken="126215" column="25" endcolumn="17" endline="180" endtoken="126553"
            line="124"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\dialog\NewTableDialog.java"/>
      <file begintoken="134643" column="25" endcolumn="17" endline="236" endtoken="134981"
            line="180"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\dialog\NewTournamentDialog.java"/>
      <codefragment><![CDATA[        btnSettingsSave = new javax.swing.JButton();
        lblSettings = new javax.swing.JLabel();

        menuSaveSettings1.setText("Save to config 1");
        menuSaveSettings1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                menuSaveSettings1ActionPerformed(evt);
            }
        });
        popupSaveSettings.add(menuSaveSettings1);

        menuSaveSettings2.setText("Save to config 2");
        menuSaveSettings2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                menuSaveSettings2ActionPerformed(evt);
            }
        });
        popupSaveSettings.add(menuSaveSettings2);

        menuLoadSettingsLast.setText("Load from last time");
        menuLoadSettingsLast.setToolTipText("");
        menuLoadSettingsLast.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                menuLoadSettingsLastActionPerformed(evt);
            }
        });
        popupLoadSettings.add(menuLoadSettingsLast);
        popupLoadSettings.add(separator1);

        menuLoadSettings1.setText("Load from config 1");
        menuLoadSettings1.setToolTipText("");
        menuLoadSettings1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                menuLoadSettings1ActionPerformed(evt);
            }
        });
        popupLoadSettings.add(menuLoadSettings1);

        menuLoadSettings2.setText("Load from config 2");
        menuLoadSettings2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                menuLoadSettings2ActionPerformed(evt);
            }
        });
        popupLoadSettings.add(menuLoadSettings2);
        popupLoadSettings.add(separator2);

        menuLoadSettingsDefault.setText("Load default settings");
        menuLoadSettingsDefault.setToolTipText("");
        menuLoadSettingsDefault.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                menuLoadSettingsDefaultActionPerformed(evt);
            }
        });
        popupLoadSettings.add(menuLoadSettingsDefault);

        setTitle("New Table");]]></codefragment>
   </duplication>
   <duplication lines="25" tokens="326">
      <file begintoken="148586" column="44" endcolumn="95" endline="539" endtoken="148911"
            line="515"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\dialog\PickCheckBoxDialog.java"/>
      <file begintoken="152010" column="9" endcolumn="79" endline="568" endtoken="152335"
            line="543"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\dialog\PickChoiceDialog.java"/>
      <codefragment><![CDATA[        getRootPane().setDefaultButton(btOK);
        getRootPane().setDefaultButton(btOK);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(layout.createSequentialGroup()
                                .addContainerGap()
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                        .addComponent(scrollList, javax.swing.GroupLayout.Alignment.TRAILING)
                                        .addComponent(panelCommands, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                        .addComponent(panelHeader, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                        .addComponent(panelSearch, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                                .addContainerGap())
        );
        layout.setVerticalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                                .addContainerGap()
                                .addComponent(panelHeader, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(panelSearch, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(scrollList, javax.swing.GroupLayout.DEFAULT_SIZE, 240, Short.MAX_VALUE)]]></codefragment>
   </duplication>
   <duplication lines="64" tokens="251">
      <file begintoken="146215" column="37" endcolumn="13" endline="168" endtoken="146465"
            line="105"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\dialog\PickCheckBoxDialog.java"/>
      <file begintoken="149488" column="44" endcolumn="13" endline="142" endtoken="149738"
            line="77"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\dialog\PickChoiceDialog.java"/>
      <codefragment><![CDATA[                return n1.compareTo(n2);
            });
        }

        // search
        if (choice.isSearchEnabled()) {
            panelSearch.setVisible(true);
            this.editSearch.setText(choice.getSearchText());
        } else {
            panelSearch.setVisible(false);
            this.editSearch.setText("");
        }

        // listeners for inremental filtering        
        editSearch.getDocument().addDocumentListener(new DocumentListener() {
            @Override
            public void insertUpdate(DocumentEvent e) {
                choice.setSearchText(editSearch.getText());
                loadData();
            }

            @Override
            public void removeUpdate(DocumentEvent e) {
                choice.setSearchText(editSearch.getText());
                loadData();
            }

            @Override
            public void changedUpdate(DocumentEvent e) {
                choice.setSearchText(editSearch.getText());
                loadData();
            }
        });

        // listeners for select up and down without edit focus lost
        editSearch.addKeyListener(new KeyListener() {
            @Override
            public void keyTyped(KeyEvent e) {
                //System.out.println("types");                
            }

            @Override
            public void keyPressed(KeyEvent e) {
                if (e.getKeyCode() == KeyEvent.VK_UP) {
                    doPrevSelect();
                } else if (e.getKeyCode() == KeyEvent.VK_DOWN) {
                    doNextSelect();
                }
            }

            @Override
            public void keyReleased(KeyEvent e) {
                //System.out.println("released");
            }
        });

        // listeners double click choose
        listChoices.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                if (e.getClickCount() == 2) {
                    doChoose();
                }
            }]]></codefragment>
   </duplication>
   <duplication lines="62" tokens="248">
      <file begintoken="382278" column="5" endcolumn="27" endline="85" endtoken="382525"
            line="24"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\org\mage\plugins\card\dl\sources\AltMtgOnlTokensImageSource.java"/>
      <file begintoken="394002" column="5" endcolumn="27" endline="84" endtoken="394249"
            line="24"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\org\mage\plugins\card\dl\sources\MtgOnlTokensImageSource.java"/>
      <codefragment><![CDATA[    }

    @Override
    public float getAverageSize() {
        return 26.7f;
    }

    @Override
    public String getNextHttpImageUrl() {
        if (copyUrlToImage == null) {
            setupLinks();
        }

        for (String key : copyUrlToImageDone.keySet()) {
            if (copyUrlToImageDone.get(key) < maxTimes) {
                copyUrlToImageDone.put(key, maxTimes);
                return key;
            }
        }
        if (maxTimes < 2) {
            maxTimes++;
        }
        for (String key : copyUrlToImageDone.keySet()) {
            if (copyUrlToImageDone.get(key) < maxTimes) {
                copyUrlToImageDone.put(key, maxTimes);
                return key;
            }
        }
        return null;
    }

    @Override
    public String getFileForHttpImage(String httpImageUrl) {
        if (httpImageUrl != null) {
            return copyUrlToImage.get(httpImageUrl);
        }
        return null;
    }

    @Override
    public boolean prepareDownloadList(DownloadServiceInfo downloadServiceInfo, List<CardDownloadData> downloadList) {
        return true;
    }

    @Override
    public CardImageUrls generateCardUrl(CardDownloadData card) throws Exception {
        return null;
    }

    Map<String, String> copyUrlToImage = null;
    Map<String, String> copyImageToUrl = null;
    Map<String, Integer> copyUrlToImageDone = null;

    private void setupLinks() {
        if (copyUrlToImage != null) {
            return;
        }
        copyUrlToImage = new HashMap<>();
        copyImageToUrl = new HashMap<>();
        copyUrlToImageDone = new HashMap<>();

        copyUrlToImage.put("SCG_CC_002-Penguin.jpg", "BIRD.WU.BIRD.CREATURE.1.1.full.jpg");]]></codefragment>
   </duplication>
   <duplication lines="40" tokens="221">
      <file begintoken="392774" column="32" endcolumn="26" endline="97" endtoken="392994"
            line="58"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\org\mage\plugins\card\dl\sources\MagidexImageSource.java"/>
      <file begintoken="396576" column="32" endcolumn="26" endline="122" endtoken="396796"
            line="81"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\org\mage\plugins\card\dl\sources\MythicspoilerComSource.java"/>
      <file begintoken="417309" column="32" endcolumn="26" endline="135" endtoken="417529"
            line="96"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\org\mage\plugins\card\dl\sources\WizardCardsImageSource.java"/>
      <codefragment><![CDATA[        supportedSets.add("S00");
        supportedSets.add("PCY");
        supportedSets.add("INV");
        // supportedSets.add("BTD"); // Beatdown Boxset
        supportedSets.add("PLS");
        supportedSets.add("7ED");
        supportedSets.add("APC");
        supportedSets.add("ODY");
        // supportedSets.add("DKM"); // Deckmasters 2001
        supportedSets.add("TOR");
        supportedSets.add("JUD");
        supportedSets.add("ONS");
        supportedSets.add("LGN");
        supportedSets.add("SCG");
        supportedSets.add("8ED");
        supportedSets.add("MRD");
        supportedSets.add("DST");
        supportedSets.add("5DN");
        supportedSets.add("CHK");
        supportedSets.add("UNH");
        supportedSets.add("BOK");
        supportedSets.add("SOK");
        supportedSets.add("9ED");
        supportedSets.add("RAV");
        supportedSets.add("GPT");
        supportedSets.add("DIS");
        supportedSets.add("CSP");
        supportedSets.add("TSP");
        supportedSets.add("TSB");
        supportedSets.add("PLC");
        supportedSets.add("FUT");
        supportedSets.add("10E");
        supportedSets.add("MED");
        supportedSets.add("LRW");
        supportedSets.add("EVG");
        supportedSets.add("MOR");
        supportedSets.add("SHM");
        supportedSets.add("EVE");
        supportedSets.add("DRB");
        supportedSets.add("ME2");]]></codefragment>
   </duplication>
   <duplication lines="14" tokens="201">
      <file begintoken="92545" column="138" endcolumn="54" endline="170" endtoken="92745"
            line="157"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\deckeditor\DeckExportClipboardDialog.java"/>
      <file begintoken="94047" column="105" endcolumn="54" endline="164" endtoken="94247"
            line="151"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\deckeditor\DeckImportClipboardDialog.java"/>
      <codefragment><![CDATA[                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(buttonOK, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(buttonCancel, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE))
        );
        panelCommandsLayout.setVerticalGroup(
                panelCommandsLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(panelCommandsLayout.createSequentialGroup()
                                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addGroup(panelCommandsLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, panelCommandsLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                                .addComponent(buttonCancel, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                                                .addComponent(buttonOK, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE))
                                        .addComponent(buttonCopy, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)))]]></codefragment>
   </duplication>
   <duplication lines="16" tokens="164">
      <file begintoken="147636" column="43" endcolumn="136" endline="418" endtoken="147799"
            line="403"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\dialog\PickCheckBoxDialog.java"/>
      <file begintoken="151162" column="26" endcolumn="116" endline="458" endtoken="151325"
            line="443"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\dialog\PickChoiceDialog.java"/>
      <codefragment><![CDATA[        btClear = new javax.swing.JButton();

        labelMessage.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        labelMessage.setText("<html><div style='text-align: center;'>example long message example long message example long message example long message example long message</div></html>");

        labelSubMessage.setFont(labelSubMessage.getFont().deriveFont((labelSubMessage.getFont().getStyle() | java.awt.Font.ITALIC) | java.awt.Font.BOLD));
        labelSubMessage.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        labelSubMessage.setText("<html><div style='text-align: center;'>example long message example long</div></html>");

        javax.swing.GroupLayout panelHeaderLayout = new javax.swing.GroupLayout(panelHeader);
        panelHeader.setLayout(panelHeaderLayout);
        panelHeaderLayout.setHorizontalGroup(
                panelHeaderLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(panelHeaderLayout.createSequentialGroup()
                                .addGroup(panelHeaderLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                        .addComponent(labelMessage, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, 0, Short.MAX_VALUE)]]></codefragment>
   </duplication>
   <duplication lines="29" tokens="152">
      <file begintoken="15117" column="9" endcolumn="13" endline="139" endtoken="15268"
            line="111"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\cards\DragCardGrid.java"/>
      <file begintoken="15701" column="9" endcolumn="13" endline="249" endtoken="15852"
            line="221"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\cards\DragCardGrid.java"/>
      <codefragment><![CDATA[        }

        // Determine column
        int cardWidth = getCardWidth();
        int cardHeight = getCardHeight();
        int cardTopHeight = CardRenderer.getCardTopHeight(cardWidth);
        int dx = x % (cardWidth + GRID_PADDING);
        int col = x / (cardWidth + GRID_PADDING);
        int gridWidth = cardGrid.isEmpty() ? 0 : cardGrid.get(0).size();

        if (dx < GRID_PADDING && col < gridWidth) {
            // Which row to add to?
            int curY = COUNT_LABEL_HEIGHT;
            int rowIndex = 0;
            for (int i = 0; i < cardGrid.size(); ++i) {
                int maxStack = maxStackSize.get(i);
                int rowHeight = cardTopHeight * (maxStack - 1) + cardHeight;
                int rowBottom = curY + rowHeight + COUNT_LABEL_HEIGHT;

                // Break out if we're in that row
                if (y < rowBottom) {
                    // Set the row
                    rowIndex = i;
                    break;
                } else {
                    rowIndex = i + 1;
                    curY = rowBottom;
                }
            }]]></codefragment>
   </duplication>
   <duplication lines="47" tokens="148">
      <file begintoken="382817" column="95" endcolumn="5" endline="167" endtoken="382964"
            line="121"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\org\mage\plugins\card\dl\sources\AltMtgOnlTokensImageSource.java"/>
      <file begintoken="396181" column="108" endcolumn="5" endline="369" endtoken="396328"
            line="325"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\org\mage\plugins\card\dl\sources\MtgOnlTokensImageSource.java"/>
      <codefragment><![CDATA[        copyUrlToImage.put("SCG_SC_002-Soldier.jpg", "SOLDIER.R.SOLDIER.CREATURE.1.1.full.jpg");


        for (String key : copyUrlToImage.keySet()) {
            copyUrlToImageDone.put(key, maxTimes);
            copyImageToUrl.put(copyUrlToImage.get(key), key);
        }
    }

    @Override
    public CardImageUrls generateTokenUrl(CardDownloadData card) throws IOException {
        if (copyUrlToImage == null) {
            setupLinks();
        }
        return null;
    }

    @Override
    public int getTotalImages() {
        if (copyUrlToImage == null) {
            setupLinks();
        }
        if (copyUrlToImage != null) {
            return copyImageToUrl.size();
        }
        return -1;
    }

    @Override
    public boolean isTokenSource() {
        return true;
    }

    @Override
    public boolean isCardSource() {
        return false;
    }

    @Override
    public void doPause(String httpImageUrl) {
    }

    @Override
    public boolean isCardImageProvided(String setCode, String cardName) {
        // no cards support, only tokens
        return false;
    }]]></codefragment>
   </duplication>
   <duplication lines="12" tokens="146">
      <file begintoken="10246" column="70" endcolumn="131" endline="144" endtoken="10391"
            line="133"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\cards\CardsList.java"/>
      <file begintoken="62336" column="69" endcolumn="130" endline="130" endtoken="62481"
            line="119"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\deckeditor\CardSelector.java"/>
      <codefragment><![CDATA[         mainTable.getColumnModel().getColumn(0).setPreferredWidth(25);
         mainTable.getColumnModel().getColumn(1).setPreferredWidth(110);
         mainTable.getColumnModel().getColumn(2).setPreferredWidth(90);
         mainTable.getColumnModel().getColumn(3).setPreferredWidth(50);
         mainTable.getColumnModel().getColumn(4).setPreferredWidth(170);
         mainTable.getColumnModel().getColumn(5).setPreferredWidth(30);
         mainTable.getColumnModel().getColumn(6).setPreferredWidth(15);
         mainTable.getColumnModel().getColumn(7).setPreferredWidth(15);

         // new mana render (svg support)
         mainTable.getColumnModel().getColumn(mainModel.COLUMN_INDEX_COST).setCellRenderer(new ManaSymbolsCellRenderer());
         mainTable.getColumnModel().getColumn(mainModel.COLUMN_INDEX_COLOR_IDENTITY).setCellRenderer(new ManaSymbolsCellRenderer());]]></codefragment>
   </duplication>
   <duplication lines="26" tokens="143">
      <file begintoken="146462" column="29" endcolumn="36" endline="191" endtoken="146604"
            line="166"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\dialog\PickCheckBoxDialog.java"/>
      <file begintoken="149852" column="35" endcolumn="36" endline="192" endtoken="149994"
            line="167"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\dialog\PickChoiceDialog.java"/>
      <codefragment><![CDATA[                    doChoose();
                }
            }
        });

        // listeners for ESC close
        if (!choice.isRequired()) {
            String cancelName = "cancel";
            InputMap inputMap = getRootPane().getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
            inputMap.put(KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE, 0), cancelName);
            ActionMap actionMap = getRootPane().getActionMap();
            actionMap.put(cancelName, new AbstractAction() {
                public void actionPerformed(ActionEvent e) {
                    doCancel();
                }
            });
        }

        // window settings
        MageFrame.getDesktop().remove(this);
        if (this.isModal()) {
            MageFrame.getDesktop().add(this, JLayeredPane.MODAL_LAYER);
        } else {
            MageFrame.getDesktop().add(this, JLayeredPane.PALETTE_LAYER);
        }
        if (mageDialogState != null) mageDialogState.setStateToDialog(this);]]></codefragment>
   </duplication>
   <duplication lines="27" tokens="137">
      <file begintoken="146900" column="54" endcolumn="12" endline="273" endtoken="147036"
            line="247"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\dialog\PickCheckBoxDialog.java"/>
      <file begintoken="150556" column="62" endcolumn="12" endline="337" endtoken="150692"
            line="311"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\dialog\PickChoiceDialog.java"/>
      <codefragment><![CDATA[            label.setText(String.format(HTML_TEMPLATE, text));
            label.setVisible(true);
        } else {
            label.setText("");
            label.setVisible(false);
        }
    }

    private void doNextSelect() {
        int newSel = this.listChoices.getSelectedIndex() + 1;
        int maxSel = this.listChoices.getModel().getSize() - 1;
        if (newSel <= maxSel) {
            this.listChoices.setSelectedIndex(newSel);
            this.listChoices.ensureIndexIsVisible(newSel);
        }
    }

    private void doPrevSelect() {
        int newSel = this.listChoices.getSelectedIndex() - 1;
        if (newSel >= 0) {
            this.listChoices.setSelectedIndex(newSel);
            this.listChoices.ensureIndexIsVisible(newSel);
        }
    }

    private void doChoose() {
        if ((tList != null) || (setChoice())) {]]></codefragment>
   </duplication>
   <duplication lines="12" tokens="124">
      <file begintoken="125666" column="9" endcolumn="46" endline="81" endtoken="125789"
            line="70"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\dialog\NewTableDialog.java"/>
      <file begintoken="134024" column="9" endcolumn="46" endline="130" endtoken="134147"
            line="119"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\dialog\NewTournamentDialog.java"/>
      <codefragment><![CDATA[        popupSaveSettings = new javax.swing.JPopupMenu();
        menuSaveSettings1 = new javax.swing.JMenuItem();
        menuSaveSettings2 = new javax.swing.JMenuItem();
        popupLoadSettings = new javax.swing.JPopupMenu();
        menuLoadSettingsLast = new javax.swing.JMenuItem();
        separator1 = new javax.swing.JPopupMenu.Separator();
        menuLoadSettings1 = new javax.swing.JMenuItem();
        menuLoadSettings2 = new javax.swing.JMenuItem();
        separator2 = new javax.swing.JPopupMenu.Separator();
        menuLoadSettingsDefault = new javax.swing.JMenuItem();
        lblName = new javax.swing.JLabel();
        txtName = new javax.swing.JTextField();]]></codefragment>
   </duplication>
   <duplication lines="23" tokens="123">
      <file begintoken="147504" column="9" endcolumn="44" endline="402" endtoken="147626"
            line="380"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\dialog\PickCheckBoxDialog.java"/>
      <file begintoken="151026" column="9" endcolumn="44" endline="440" endtoken="151148"
            line="418"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\dialog\PickChoiceDialog.java"/>
      <codefragment><![CDATA[        }
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        panelHeader = new javax.swing.JPanel();
        labelMessage = new javax.swing.JLabel();
        labelSubMessage = new javax.swing.JLabel();
        panelSearch = new javax.swing.JPanel();
        labelSearch = new javax.swing.JLabel();
        editSearch = new javax.swing.JTextField();
        scrollList = new javax.swing.JScrollPane();
        listChoices = new javax.swing.JList();
        panelCommands = new javax.swing.JPanel();
        btOK = new javax.swing.JButton();
        btCancel = new javax.swing.JButton();]]></codefragment>
   </duplication>
   <duplication lines="12" tokens="122">
      <file begintoken="198541" column="224" endcolumn="80" endline="125" endtoken="198662"
            line="114"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\dialog\TestCardRenderDialog.java"/>
      <file begintoken="198843" column="158" endcolumn="80" endline="164" endtoken="198964"
            line="153"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\dialog\TestCardRenderDialog.java"/>
      <codefragment><![CDATA[    private PermanentView createPermanentCard(Game game, UUID controllerId, String code, String cardNumber, int powerBoosted, int toughnessBoosted, int damage, boolean tapped, boolean transform, List<Ability> extraAbilities) {
        CardInfo cardInfo = CardRepository.instance.findCard(code, cardNumber, false);
        ExpansionInfo setInfo = ExpansionRepository.instance.getSetByCode(code);
        CardSetInfo testSet = new CardSetInfo(cardInfo.getName(), setInfo.getCode(), cardNumber, cardInfo.getRarity(),
                new CardGraphicInfo(cardInfo.getFrameStyle(), cardInfo.usesVariousArt()));
        Card newCard = CardImpl.createCard(cardInfo.getClassName(), testSet);

        Set<Card> cardsList = new HashSet<>();
        cardsList.add(newCard);
        game.loadCards(cardsList, controllerId);

        Card permCard = CardUtil.getDefaultCardSideForBattlefield(game, newCard);]]></codefragment>
   </duplication>
   <duplication lines="13" tokens="113">
      <file begintoken="227072" column="63" endcolumn="9" endline="1556" endtoken="227184"
            line="1544"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\game\GamePanel.java"/>
      <file begintoken="227195" column="62" endcolumn="9" endline="1571" endtoken="227307"
            line="1559"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\game\GamePanel.java"/>
      <codefragment><![CDATA[        for (RevealedView rev : lastGameData.game.getCompanion()) {
            for (Map.Entry<UUID, CardView> card : rev.getCards().entrySet()) {
                if (needSelectable.contains(card.getKey())) {
                    card.getValue().setChoosable(true);
                }
                if (needChosen.contains(card.getKey())) {
                    card.getValue().setSelected(true);
                }
                if (needPlayable.containsObject(card.getKey())) {
                    card.getValue().setPlayableStats(needPlayable.getStats(card.getKey()));
                }
            }
        }]]></codefragment>
   </duplication>
   <duplication lines="25" tokens="112">
      <file begintoken="148913" column="100" endcolumn="11" endline="563" endtoken="149024"
            line="539"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\dialog\PickCheckBoxDialog.java"/>
      <file begintoken="152337" column="84" endcolumn="11" endline="593" endtoken="152448"
            line="568"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\dialog\PickChoiceDialog.java"/>
      <codefragment><![CDATA[                                .addComponent(scrollList, javax.swing.GroupLayout.DEFAULT_SIZE, 240, Short.MAX_VALUE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(panelCommands, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addContainerGap())
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void btOKActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btOKActionPerformed
        doChoose();
    }//GEN-LAST:event_btOKActionPerformed

    private void btCancelActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btCancelActionPerformed
        doCancel();
    }//GEN-LAST:event_btCancelActionPerformed

    /**
     * Closes the dialog
     */
    private void closeDialog(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_closeDialog
        doCancel();
    }//GEN-LAST:event_closeDialog

    private void btClearActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btClearActionPerformed]]></codefragment>
   </duplication>
   <duplication lines="25" tokens="110">
      <file begintoken="358747" column="104" endcolumn="49" endline="738" endtoken="358856"
            line="714"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\org\mage\card\arcane\ModernCardRenderer.java"/>
      <file begintoken="359116" column="63" endcolumn="49" endline="786" endtoken="359225"
            line="763"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\org\mage\card\arcane\ModernCardRenderer.java"/>
      <codefragment><![CDATA[    public void drawZendikarCurvedFace(Graphics2D g2, BufferedImage image, int x, int y, int x2, int y2,
                                       Color boxColor, Paint paint) {

        BufferedImage artToUse = faceArtImage;
        boolean hadToUseFullArt = false;
        if (faceArtImage == null) {
            if (artImage == null) {
                return;
            }
            hadToUseFullArt = true;
            artToUse = artImage;
        }
        int srcW = artToUse.getWidth();
        int srcH = artToUse.getHeight();

        if (hadToUseFullArt) {
            // Get a box based on the standard scan from gatherer.
            // Width = 185/223 pixels (centered)
            // Height = 220/310, 38 pixels from top
            int subx = 19 * srcW / 223;
            int suby = 38 * srcH / 310;
            artToUse = artImage.getSubimage(subx, suby, 185 * srcW / 223, 220 * srcH / 310);
        }

        Path2D.Double curve = new Path2D.Double();]]></codefragment>
   </duplication>
   <duplication lines="17" tokens="109">
      <file begintoken="81863" column="66" endcolumn="5" endline="95" endtoken="81971"
            line="79"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\deckeditor\DeckEditorPane.java"/>
      <file begintoken="207604" column="9" endcolumn="5" endline="94" endtoken="207712"
            line="79"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\draft\DraftPane.java"/>
      <codefragment><![CDATA[        getContentPane().add(filler1, java.awt.BorderLayout.NORTH);
    }// </editor-fold>//GEN-END:initComponents

    private void initComponents(Component container) {

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(container, javax.swing.GroupLayout.DEFAULT_SIZE, 885, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(container, javax.swing.GroupLayout.DEFAULT_SIZE, 626, Short.MAX_VALUE)
        );

    }]]></codefragment>
   </duplication>
   <duplication lines="22" tokens="109">
      <file begintoken="91871" column="22" endcolumn="11" endline="65" endtoken="91979"
            line="44"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\deckeditor\DeckExportClipboardDialog.java"/>
      <file begintoken="93378" column="27" endcolumn="11" endline="61" endtoken="93486"
            line="40"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\deckeditor\DeckImportClipboardDialog.java"/>
      <codefragment><![CDATA[        onRefreshData();

        this.setModal(true);
        this.setResizable(true);
        getRootPane().setDefaultButton(buttonOK);

        // windows settings
        MageFrame.getDesktop().remove(this);
        if (this.isModal()) {
            MageFrame.getDesktop().add(this, JLayeredPane.MODAL_LAYER);
        } else {
            MageFrame.getDesktop().add(this, JLayeredPane.PALETTE_LAYER);
        }
        this.makeWindowCentered();

        // Close on "ESC"
        registerKeyboardAction(e -> onCancel(), KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE, 0), JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);

        this.setVisible(true);
    }

    private void setClipboardStringData(String text) {]]></codefragment>
   </duplication>
   <duplication lines="23" tokens="109">
      <file begintoken="430307" column="69" endcolumn="17" endline="448" endtoken="430415"
            line="426"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\org\mage\plugins\card\images\ImageCache.java"/>
      <file begintoken="430533" column="44" endcolumn="17" endline="485" endtoken="430641"
            line="471"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\org\mage\plugins\card\images\ImageCache.java"/>
      <codefragment><![CDATA[            LOGGER.debug("Image doesn't exists in the cache: " + key);
            return data;
        }

        double scale = Math.min((double) width / data.getImage().getWidth(), (double) height / data.getImage().getHeight());
        if (scale >= 1) {
            return data;
        }

        BufferedImage newImage = TransformedImageCache.getResizedImage(data.getImage(), (int) (data.getImage().getWidth() * scale), (int) (data.getImage().getHeight() * scale));
        data.setImage(newImage);
        return data;
    }

    /**
     * Returns the image appropriate to display the card in the picture panel
     *
     * @param card
     * @param width
     * @param height
     * @return
     */
    public static ImageCacheData getFaceImage(CardView card, int width, int height) {]]></codefragment>
   </duplication>
   <duplication lines="7" tokens="107">
      <file begintoken="344838" column="58" endcolumn="90" endline="119" endtoken="344944"
            line="113"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\org\mage\card\arcane\CardRendererUtils.java"/>
      <file begintoken="345187" column="66" endcolumn="90" endline="142" endtoken="345293"
            line="136"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\org\mage\card\arcane\CardRendererUtils.java"/>
      <codefragment><![CDATA[        g.fillRect(x + bevel, y + 2, w - 2 * bevel, h - 4);
        g.setPaint(fill);
        g.setColor(abitbrighter(g.getColor()));
        g.drawLine(x + 1 + bevel, y + 1, x + 1 + bevel + w - 2 * bevel - 2, y + 1);
        g.setPaint(fill);
        g.setColor(abitdarker(g.getColor()));
        g.drawLine(x + 1 + bevel, y + h - 2, x + 1 + bevel + w - 2 * bevel - 2, y + h - 2);]]></codefragment>
   </duplication>
   <duplication lines="26" tokens="106">
      <file begintoken="15302" column="99" endcolumn="13" endline="169" endtoken="15407"
            line="144"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\cards\DragCardGrid.java"/>
      <file begintoken="15988" column="57" endcolumn="13" endline="294" endtoken="16093"
            line="269"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\cards\DragCardGrid.java"/>
      <codefragment><![CDATA[            insertArrow.setLocation((cardWidth + GRID_PADDING) * col + GRID_PADDING / 2 - 32, curY);
        } else {
            // Clamp to a new col one after the current last one
            col = Math.min(col, gridWidth);

            // Determine place in the col
            int curY = COUNT_LABEL_HEIGHT;
            int rowIndex = 0;
            int offsetIntoStack = 0;
            for (int i = 0; i < cardGrid.size(); ++i) {
                int maxStack = maxStackSize.get(i);
                int rowHeight = cardTopHeight * (maxStack - 1) + cardHeight;
                int rowBottom = curY + rowHeight + COUNT_LABEL_HEIGHT;

                // Break out if we're in that row
                if (y < rowBottom) {
                    // Set the row
                    rowIndex = i;
                    offsetIntoStack = y - curY;
                    break;
                } else {
                    rowIndex = i + 1;
                    offsetIntoStack = y - rowBottom;
                    curY = rowBottom;
                }
            }]]></codefragment>
   </duplication>
   <duplication lines="18" tokens="106">
      <file begintoken="105165" column="5" endcolumn="5" endline="240" endtoken="105270"
            line="223"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\dialog\CardInfoWindowDialog.java"/>
      <file begintoken="250917" column="5" endcolumn="5" endline="957" endtoken="251022"
            line="940"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\game\PlayerPanelExt.java"/>
      <codefragment><![CDATA[    }

    private int qtyCardTypes(mage.view.CardsView cardsView) {
        Set<String> cardTypesPresent = new LinkedHashSet<String>() {
        };
        for (CardView card : cardsView.values()) {
            Set<CardType> cardTypes = EnumSet.noneOf(CardType.class);
            cardTypes.addAll(card.getCardTypes());
            for (CardType cardType : cardTypes) {
                cardTypesPresent.add(cardType.toString());
            }
        }
        if (cardTypesPresent.isEmpty()) {
            return 0;
        } else {
            return cardTypesPresent.size();
        }
    }]]></codefragment>
   </duplication>
   <duplication lines="12" tokens="106">
      <file begintoken="123629" column="39" endcolumn="62" endline="85" endtoken="123734"
            line="74"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\dialog\JoinTableDialog.java"/>
      <file begintoken="204249" column="10" endcolumn="62" endline="235" endtoken="204354"
            line="224"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\dialog\TestModalDialog.java"/>
      <codefragment><![CDATA[        txtPassword.setText("password");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(layout.createSequentialGroup()
                                .addContainerGap()
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                                                .addGap(0, 0, Short.MAX_VALUE)
                                                .addComponent(btnOK)]]></codefragment>
   </duplication>
   <duplication lines="18" tokens="105">
      <file begintoken="398414" column="5" endcolumn="95" endline="404" endtoken="398518"
            line="387"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\org\mage\plugins\card\dl\sources\MythicspoilerComSource.java"/>
      <file begintoken="419638" column="5" endcolumn="95" endline="465" endtoken="419742"
            line="447"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\org\mage\plugins\card\dl\sources\WizardCardsImageSource.java"/>
      <codefragment><![CDATA[    }

    @Override
    public boolean prepareDownloadList(DownloadServiceInfo downloadServiceInfo, List<CardDownloadData> downloadList) {
        return true;
    }

    @Override
    public CardImageUrls generateCardUrl(CardDownloadData card) throws Exception {
        String collectorId = card.getCollectorId();
        String cardSet = card.getSet();
        if (collectorId == null || cardSet == null) {
            throw new Exception("Wrong parameters for image: collector id: " + collectorId + ", card set: " + cardSet);
        }
        if (card.isFlippedSide()) { //doesn't support rotated images
            return null;
        }
        Map<String, String> setLinks = sets.computeIfAbsent(cardSet, k -> getSetLinks(cardSet));]]></codefragment>
   </duplication>
   <duplication lines="5" tokens="104">
      <file begintoken="311074" column="40" endcolumn="170" endline="32" endtoken="311177"
            line="28"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\util\gui\ArrowUtil.java"/>
      <file begintoken="312082" column="43" endcolumn="170" endline="113" endtoken="312185"
            line="109"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\util\gui\ArrowUtil.java"/>
      <codefragment><![CDATA[                MageCard permanent = pa.getBattlefieldPanel().getPermanentPanels().get(uuid);
                if (permanent != null) {
                    Point target = permanent.getCardLocationOnScreen().getCardPoint();
                    target.translate(-parentPoint.x, -parentPoint.y);
                    ArrowBuilder.getBuilder().addArrow(data.getGameId(), (int) me.getX() + 35, (int) me.getY(), (int) target.getX() + 40, (int) target.getY() + 10, Color.green, ArrowBuilder.Type.PAIRED);]]></codefragment>
   </duplication>
   <duplication lines="17" tokens="100">
      <file begintoken="40391" column="32" endcolumn="57" endline="127" endtoken="40490"
            line="111"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\components\ext\dlg\DialogManager.java"/>
      <file begintoken="40540" column="34" endcolumn="57" endline="157" endtoken="40639"
            line="140"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\components\ext\dlg\DialogManager.java"/>
      <codefragment><![CDATA[    public void showExileDialog(CardsView cards, BigCard bigCard, UUID gameId) {

        int w = 720;
        int h = 550;

        int height = getHeight();
        int width = getWidth();

        int x = ((width - w) / 2);
        int y = ((height - h) / 2);

        DlgParams params = new DlgParams();
        params.rect = new Rectangle(x, y, w, h);
        params.bigCard = bigCard;
        params.gameId = gameId;
        params.setCards(cards);
        dialogContainer = new DialogContainer(MTGDialogs.EXILE, params);]]></codefragment>
   </duplication>
   <duplication lines="22" tokens="100">
      <file begintoken="198406" column="21" endcolumn="11" endline="114" endtoken="198505"
            line="93"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\dialog\TestCardRenderDialog.java"/>
      <file begintoken="203258" column="52" endcolumn="11" endline="61" endtoken="203357"
            line="40"
            path="D:\eclipse-workspace\mage-master\mageProyectAnalisis\Mage.Client\src\main\java\mage\client\dialog\TestModalDialog.java"/>
      <codefragment><![CDATA[        reloadCards();

        // windows settings
        MageFrame.getDesktop().remove(this);
        if (this.isModal()) {
            MageFrame.getDesktop().add(this, JLayeredPane.MODAL_LAYER);
        } else {
            MageFrame.getDesktop().add(this, JLayeredPane.PALETTE_LAYER);
        }
        this.makeWindowCentered();

        // Close on "ESC"
        registerKeyboardAction(e -> onCancel(), KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE, 0), JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);

        this.setVisible(true);
    }

    private void onCancel() {
        this.removeDialog();
    }

    private PermanentView createPermanentCard(Game game, UUID controllerId, String code, String cardNumber, int powerBoosted, int toughnessBoosted, int damage, boolean tapped, boolean transform, List<Ability> extraAbilities) {]]></codefragment>
   </duplication>
</pmd-cpd>